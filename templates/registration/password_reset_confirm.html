{% extends "core/base.html" %}
{% block title %}Set New Password{% endblock %}

{% block content %}
<div class="container" style="max-width: 980px; margin: 30px auto; padding: 0 14px;">
  <div style="max-width:560px;margin:0 auto;background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:18px;box-shadow:0 10px 24px rgba(15,23,42,0.06);">
    <h2 style="margin:0 0 6px;font-size:26px;">Set New Password</h2>
    <p style="margin:0 0 14px;color:#6b7280;line-height:1.5;">
      Choose a strong password you donâ€™t use elsewhere.
    </p>

    {% if validlink %}
      {% if form.errors %}
        <div style="background:#fff1f2;border:1px solid #fecdd3;color:#9f1239;padding:10px 12px;border-radius:12px;margin:12px 0;">
          Please fix the errors below.
        </div>
      {% endif %}

      <form method="post" style="margin:0;">
        {% csrf_token %}

        <label style="font-weight:700;color:#374151;">New password</label>
        {{ form.new_password1 }}

        <div style="height:10px;"></div>

        <label style="font-weight:700;color:#374151;">Confirm new password</label>
        {{ form.new_password2 }}

        <button type="submit"
          style="margin-top:14px;width:100%;padding:12px 16px;border-radius:999px;border:1px solid #2563eb;background:#2563eb;color:#fff;font-weight:800;cursor:pointer;">
          Update Password
        </button>
      </form>

    {% else %}
      <div style="background:#fffbeb;border:1px solid #fde68a;color:#92400e;padding:12px;border-radius:12px;">
        This reset link is invalid or has expired. Please request a new one.
      </div>

      <a href="{% url 'password_reset' %}"
         style="margin-top:14px;display:inline-flex;align-items:center;justify-content:center;width:100%;
                padding:12px 16px;border-radius:999px;border:1px solid #2563eb;background:#2563eb;color:#fff;font-weight:800;">
        Request New Link
      </a>
    {% endif %}

    <div style="margin-top:12px;text-align:center;">
      <a href="{% url 'login' %}" style="font-weight:800;">Back to Login</a>
    </div>
  </div>
</div>
{% endblock %}
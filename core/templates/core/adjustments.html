{% extends "core/base.html" %}
{% block title %}Adjustments{% endblock %}

{% block content %}
<div class="page" style="max-width:1100px;margin:50px auto 80px;padding:0 16px;font-size:17px;line-height:1.45;">

  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:22px;flex-wrap:wrap;gap:12px;">
    <div>
      <h1 style="margin:0 0 6px;font-size:34px;font-weight:700;" data-i18n="adj_title">Adjustments</h1>
      <p style="margin:0 0 20px;font-size:16px;color:#475569;">
        <span data-i18n="adj_subtitle">
          Customer/Supplier opening balance corrections (no cash/bank involved). Posts against
        </span>
        <strong>3000 <span data-i18n="opening_balances">Opening Balances</span></strong>.
      </p>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;">
      <a href="{% url 'dashboard' %}"
         style="display:inline-flex;align-items:center;justify-content:center;padding:10px 16px;min-width:140px;border-radius:999px;font-size:16px;font-weight:500;text-decoration:none;border:1px solid #d1d5db;background:#f3f4f6;color:#111827;">
        <span data-i18n="back_dashboard">â† Dashboard</span>
      </a>
      <a href="{% url 'payments_list' %}"
         style="display:inline-flex;align-items:center;justify-content:center;padding:10px 16px;min-width:150px;border-radius:999px;font-size:16px;font-weight:500;text-decoration:none;border:1px solid #0d6efd;background:#0d6efd;color:#ffffff;">
        <span data-i18n="payments">Payments</span>
      </a>
    </div>
  </div>

  {% if error %}
    <div style="margin-bottom:16px;padding:10px 12px;border-radius:10px;
                font-size:15px;background:#fee2e2;color:#b91c1c;border:1px solid #fecaca;">
      {{ error }}
    </div>
  {% endif %}

  {% if messages %}
    <div style="margin-bottom:16px;">
      {% for message in messages %}
        {% if "success" in message.tags %}
          <div style="margin-bottom:10px;padding:10px 12px;border-radius:10px;font-size:15px;
                      background:#dcfce7;color:#166534;border:1px solid #bbf7d0;">
            {{ message }}
          </div>
        {% elif "error" in message.tags %}
          <div style="margin-bottom:10px;padding:10px 12px;border-radius:10px;font-size:15px;
                      background:#fee2e2;color:#b91c1c;border:1px solid #fecaca;">
            {{ message }}
          </div>
        {% else %}
          <div style="margin-bottom:10px;padding:10px 12px;border-radius:10px;font-size:15px;
                      background:#f3f4f6;color:#111827;border:1px solid #e5e7eb;">
            {{ message }}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

  <!-- =========================
       PARTY ADJUSTMENT (FORM)
       ========================= -->
  <div style="background:#ffffff;border-radius:14px;border:1px solid #d1d5db;
              padding:18px 16px 18px;box-shadow:0 6px 18px rgba(15,23,42,0.06);">

    <h2 style="margin:0 0 14px;font-size:20px;font-weight:700;" data-i18n="new_adj">New Adjustment</h2>

    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="form_type" value="party_adjust">

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;">

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="date">Date</label>
          <input type="date" name="date" value="{{ today }}"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="party">Party</label>
          <select name="party" required
                  style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;height:48px;">
            <option value="" data-i18n="select_party">-- Select Party --</option>
            {% for p in parties %}
              <option value="{{ p.id }}" data-ptype="{{ p.party_type }}">{{ p.name }} ({{ p.get_party_type_display }})</option>
            {% endfor %}
          </select>
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="amount_rs">Amount (Rs)</label>
          <input type="number" name="amount" step="0.01" min="0" required
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="effect">Effect</label>

          <select name="side" id="pa_side"
                  style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;height:48px;">
            <!-- Default text will be replaced by JS once party type is known -->
            <option value="DR" selected data-i18n="effect_opt_1">Option 1</option>
            <option value="CR" data-i18n="effect_opt_2">Option 2</option>
          </select>

          <div id="pa_effect_line" style="margin-top:8px;font-size:13px;color:#0f172a;font-weight:700;" data-i18n="after_adjustment_dash">
            After this adjustment, â€”
          </div>

          <div style="margin-top:6px;font-size:13px;color:#6b7280;" data-i18n="tip_opening_only">
            Tip: This is only an opening balance correction (no cash/bank).
          </div>
        </div>

        <div style="grid-column:1/-1;">
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="note_reason_opt">Note / Reason (optional)</label>
          <input type="text" name="note" maxlength="255"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

      </div>

      <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap;">
        <button type="submit"
                style="display:inline-flex;align-items:center;justify-content:center;padding:12px 22px;border-radius:999px;font-size:17px;font-weight:500;border:1px solid #0d6efd;background:#0d6efd;color:#ffffff;cursor:pointer;white-space:nowrap;">
          <span data-i18n="save_post_adj">ğŸ’¾ Save &amp; Post Adjustment</span>
        </button>
      </div>
    </form>
  </div>

  <!-- =========================
       PARTY ADJUSTMENT (HISTORY)
       ========================= -->
  <div style="margin-top:22px;background:#ffffff;border-radius:14px;border:1px solid #d1d5db;
              padding:14px 12px 16px;box-shadow:0 6px 18px rgba(15,23,42,0.06);">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;">
      <h2 style="margin:0;font-size:20px;font-weight:700;" data-i18n="adj_history">Adjustment History</h2>
      <div style="font-size:14px;color:#475569;">
        <span data-i18n="total_amount_sum">Total (amount sum):</span>
        <strong>{{ total_adjustments }}</strong>
      </div>
    </div>

    <div style="margin-top:12px;overflow-x:auto;">
      <table style="border-collapse:collapse;width:100%;min-width:860px;">
        <thead>
          <tr>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="date">Date</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="party">Party</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="type">Type</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="side">Side</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:right;" data-i18n="amount">Amount</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="note">Note</th>
          </tr>
        </thead>
        <tbody>
          {% for a in adjustments %}
            <tr>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">{{ a.date }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">{{ a.party.name }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">{{ a.party.get_party_type_display }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">
                {% if a.party.party_type == "CUSTOMER" %}
                  {% if a.adjustment_side == "DR" %}Customer owes MORE{% else %}Customer owes LESS{% endif %}
                {% elif a.party.party_type == "SUPPLIER" %}
                  {% if a.adjustment_side == "DR" %}You owe LESS{% else %}You owe MORE{% endif %}
                {% else %}
                  {{ a.adjustment_side }}
                {% endif %}
              </td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;text-align:right;">{{ a.amount }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;color:#475569;">{{ a.description|default:"â€”" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="6" style="padding:14px 9px;text-align:center;color:#6b7280;" data-i18n="no_adjustments_yet">
                No adjustments yet.
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <p style="margin:12px 0 0;font-size:13px;color:#6b7280;">
      <span data-i18n="posting_rule_party">
        Posting rule: hits Customer Control (1300) or Supplier Control (2100) vs Opening Balances (3000).
      </span>
    </p>
  </div>

  {# ===================== STOCK ADJUSTMENT CARD ===================== #}
  <div style="margin-top:26px;background:#ffffff;border-radius:14px;border:1px solid #d1d5db;
              padding:18px 16px 18px;box-shadow:0 6px 18px rgba(15,23,42,0.06);">

    <h2 style="margin:0 0 8px;font-size:20px;font-weight:700;" data-i18n="stock_adj">Stock Adjustment</h2>
    <p style="margin:0 0 18px;font-size:15px;color:#475569;" data-i18n="stock_adj_desc">
      Damage/expiry or correction of stock with accounting impact.
    </p>

    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="form_type" value="stock_adjust">

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;">

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="date">Date</label>
          <input type="date" name="date" value="{{ today }}"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="product">Product</label>
          <select name="product" id="sa_product" required
                  style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;height:48px;">
            <option value="" data-i18n="select_product">-- Select Product --</option>
            {% for p in products %}
              <option value="{{ p.id }}"
                      data-cost="{{ p.purchase_price_per_unit|default_if_none:0|floatformat:2 }}">
                {{ p.code }} - {{ p.name }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="direction">Direction</label>
          <select name="direction" id="sa_direction"
                  style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;height:48px;">
            <option value="DOWN" selected data-i18n="down_damage">DOWN (Damage / Expiry / Loss)</option>
            <option value="UP" data-i18n="up_correction">UP (Extra / Found / Correction)</option>
          </select>
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="quantity">Quantity</label>
          <input type="number" name="qty" id="sa_qty" step="0.001" min="0"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="unit_cost_rs">Unit Cost (Rs)</label>
          <input type="number" name="unit_cost" id="sa_unit_cost" step="0.01" min="0"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
          <div style="margin-top:6px;font-size:13px;color:#6b7280;" data-i18n="autofill_cost">
            Auto-fills from product purchase price.
          </div>
        </div>

        <div>
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="total_rs">Total (Rs)</label>
          <input type="text" id="sa_total" readonly
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;background:#f9fafb;">
        </div>

        <div style="grid-column:1/-1;">
          <label style="display:block;font-size:15px;margin-bottom:6px;" data-i18n="reason_opt">Reason (optional)</label>
          <input type="text" name="reason" maxlength="255"
                 style="width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;">
        </div>

      </div>

      <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap;">
        <button type="submit"
                style="display:inline-flex;align-items:center;justify-content:center;padding:12px 22px;border-radius:999px;font-size:17px;font-weight:500;border:1px solid #0d6efd;background:#0d6efd;color:#ffffff;cursor:pointer;white-space:nowrap;">
          <span data-i18n="save_post_stock">ğŸ’¾ Save &amp; Post Stock Adjustment</span>
        </button>
      </div>
    </form>
  </div>

  <script>
  (function () {
    const productEl = document.getElementById("sa_product");
    const qtyEl = document.getElementById("sa_qty");
    const unitEl = document.getElementById("sa_unit_cost");
    const totalEl = document.getElementById("sa_total");

    if (!productEl || !qtyEl || !unitEl || !totalEl) return;

    function toNumber(val) {
      const n = parseFloat(val);
      return isNaN(n) ? 0 : n;
    }

    function fmt(n) {
      return (toNumber(n)).toFixed(2);
    }

    function recalc() {
      const qty = toNumber(qtyEl.value);
      const unit = toNumber(unitEl.value);
      totalEl.value = fmt(qty * unit);
    }

    productEl.addEventListener("change", function () {
      const opt = productEl.selectedOptions[0];
      if (!opt) return;

      const cost = opt.dataset.cost;
      if (cost !== undefined && cost !== null && cost !== "") {
        unitEl.value = cost;
      }
      recalc();
    });

    qtyEl.addEventListener("input", recalc);
    unitEl.addEventListener("input", recalc);

    recalc();
  })();
  </script>

  <script>
    (function () {
      const partyEl = document.querySelector('select[name="party"]');
      const amountEl = document.querySelector('input[name="amount"]');
      const sideEl = document.getElementById('pa_side');
      const lineEl = document.getElementById('pa_effect_line');

      if (!partyEl || !amountEl || !sideEl || !lineEl) return;

      function fmtMoney(n) {
        const num = Number(n || 0);
        if (!isFinite(num)) return "0";
        return num.toLocaleString("en-PK", { maximumFractionDigits: 2 });
      }

      function getPartyType() {
        const opt = partyEl.selectedOptions && partyEl.selectedOptions[0];
        const t = (opt && opt.dataset && opt.dataset.ptype) ? String(opt.dataset.ptype).toUpperCase() : "";

        if (t.includes("SUPPLIER")) return "SUPPLIER";
        if (t.includes("CUSTOMER")) return "CUSTOMER";

        if (t === "S") return "SUPPLIER";
        if (t === "C") return "CUSTOMER";

        return "";
      }

      function tr(key, fallback){
        const lang = localStorage.getItem("roz_lang") || "en";
        const pack = (window.ROZ_I18N && window.ROZ_I18N[lang]) ? window.ROZ_I18N[lang] : {};
        return pack[key] || fallback || key;
      }

      function updateLabelsAndLine() {
        const ptype = getPartyType();
        const side = sideEl.value; // DR or CR
        const amt = Number(amountEl.value || 0);

        // Update dropdown labels based on party type
        if (ptype === "CUSTOMER") {
          sideEl.options[0].text = tr("dr_customer_more", "DR â€” Customer will owe you MORE");
          sideEl.options[1].text = tr("cr_customer_less", "CR â€” Customer will owe you LESS");
        } else if (ptype === "SUPPLIER") {
          sideEl.options[0].text = tr("dr_supplier_less", "DR â€” You will owe supplier LESS");
          sideEl.options[1].text = tr("cr_supplier_more", "CR â€” You will owe supplier MORE");
        } else {
          sideEl.options[0].text = tr("effect_choose_party", "Select a party to see the correct effect");
          sideEl.options[1].text = tr("effect_choose_party_2", "Select a party to see the correct effect");
        }

        // Build the clear sentence you want
        if (!ptype || !amt || amt <= 0) {
          lineEl.textContent = tr("after_adjustment_dash", "After this adjustment, â€”");
          return;
        }

        const money = fmtMoney(amt);

        if (ptype === "CUSTOMER") {
          if (side === "DR") lineEl.textContent = tr("after_customer_more", `After this adjustment, customer will owe you Rs ${money} more.`).replace("{money}", money);
          else lineEl.textContent = tr("after_customer_less", `After this adjustment, customer will owe you Rs ${money} less.`).replace("{money}", money);
        } else if (ptype === "SUPPLIER") {
          if (side === "DR") lineEl.textContent = tr("after_supplier_less", `After this adjustment, you will owe the supplier Rs ${money} less.`).replace("{money}", money);
          else lineEl.textContent = tr("after_supplier_more", `After this adjustment, you will owe the supplier Rs ${money} more.`).replace("{money}", money);
        } else {
          lineEl.textContent = tr("after_balance_change", `After this adjustment, balance will change by Rs ${money}.`).replace("{money}", money);
        }
      }

      partyEl.addEventListener("change", updateLabelsAndLine);
      sideEl.addEventListener("change", updateLabelsAndLine);
      amountEl.addEventListener("input", updateLabelsAndLine);

      document.addEventListener("roz:lang-changed", () => updateLabelsAndLine());

      window.addEventListener("storage", (e) => {
        if (e.key === "roz_lang") updateLabelsAndLine();
      });

      updateLabelsAndLine();
    })();
  </script>

  <!-- =========================
       STOCK ADJUSTMENT (HISTORY)
       ========================= -->
  <div style="margin-top:22px;background:#ffffff;border-radius:14px;border:1px solid #d1d5db;
              padding:14px 12px 16px;box-shadow:0 6px 18px rgba(15,23,42,0.06);">
    <h2 style="margin:0;font-size:20px;font-weight:700;" data-i18n="stock_history">Stock Adjustment History</h2>

    <div style="margin-top:12px;overflow-x:auto;">
      <table style="border-collapse:collapse;width:100%;min-width:900px;">
        <thead>
          <tr>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="date">Date</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="product">Product</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="direction">Direction</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:right;" data-i18n="qty">Qty</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:right;" data-i18n="unit_cost">Unit Cost</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:right;" data-i18n="amount">Amount</th>
            <th style="border-bottom:1px solid #e5e7eb;padding:7px 9px;background:#f9fafb;text-align:left;" data-i18n="reason">Reason</th>
          </tr>
        </thead>
        <tbody>
          {% for s in stock_adjustments %}
            <tr>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">{{ s.date }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">
                {{ s.product.code }} - {{ s.product.name }}
              </td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;">{{ s.direction }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;text-align:right;">{{ s.qty }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;text-align:right;">{{ s.unit_cost }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;text-align:right;">{{ s.amount }}</td>
              <td style="border-bottom:1px solid #e5e7eb;padding:7px 9px;color:#475569;">{{ s.reason|default:"â€”" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="7" style="padding:14px 9px;text-align:center;color:#6b7280;" data-i18n="no_stock_adjustments">
                No stock adjustments yet.
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <p style="margin:12px 0 0;font-size:13px;color:#6b7280;" data-i18n="posting_rule_stock">
      Posting rule: DOWN â†’ Dr Inventory Write-off (5100) / Cr Inventory (1400), UP â†’ Dr Inventory (1400) / Cr Opening Balances (3000).
    </p>
  </div>

</div>

<script>
  // Page dictionary: extend global ROZ_I18N without touching base
  window.ROZ_I18N = window.ROZ_I18N || { en: {}, ur: {} };

  Object.assign(window.ROZ_I18N.en, {
    adj_title: "Adjustments",
    adj_subtitle: "Customer/Supplier opening balance corrections (no cash/bank involved). Posts against",
    opening_balances: "Opening Balances",
    back_dashboard: "â† Dashboard",
    payments: "Payments",

    new_adj: "New Adjustment",
    date: "Date",
    party: "Party",
    select_party: "-- Select Party --",
    amount_rs: "Amount (Rs)",
    effect: "Effect",
    increase_adds: "Increase (adds to balance)",
    decrease_reduces: "Decrease (reduces balance)",
    after_adjustment_dash: "After this adjustment, â€”",
    tip_opening_only: "Tip: This is only an opening balance correction (no cash/bank).",
    note_reason_opt: "Note / Reason (optional)",
    save_post_adj: "ğŸ’¾ Save & Post Adjustment",

    adj_history: "Adjustment History",
    total_amount_sum: "Total (amount sum):",
    type: "Type",
    side: "Side",
    amount: "Amount",
    note: "Note",
    no_adjustments_yet: "No adjustments yet.",
    posting_rule_party: "Posting rule: hits Customer Control (1300) or Supplier Control (2100) vs Opening Balances (3000).",

    stock_adj: "Stock Adjustment",
    stock_adj_desc: "Damage/expiry or correction of stock with accounting impact.",
    product: "Product",
    select_product: "-- Select Product --",
    direction: "Direction",
    down_damage: "DOWN (Damage / Expiry / Loss)",
    up_correction: "UP (Extra / Found / Correction)",
    quantity: "Quantity",
    unit_cost_rs: "Unit Cost (Rs)",
    autofill_cost: "Auto-fills from product purchase price.",
    total_rs: "Total (Rs)",
    reason_opt: "Reason (optional)",
    save_post_stock: "ğŸ’¾ Save & Post Stock Adjustment",

    stock_history: "Stock Adjustment History",
    qty: "Qty",
    unit_cost: "Unit Cost",
    reason: "Reason",
    no_stock_adjustments: "No stock adjustments yet.",
    posting_rule_stock: "Posting rule: DOWN â†’ Dr Inventory Write-off (5100) / Cr Inventory (1400), UP â†’ Dr Inventory (1400) / Cr Opening Balances (3000).",

    // JS dynamic labels/sentences
    dr_customer_more: "DR â€” Customer will owe you MORE",
    cr_customer_less: "CR â€” Customer will owe you LESS",
    dr_supplier_less: "DR â€” You will owe supplier LESS",
    cr_supplier_more: "CR â€” You will owe supplier MORE",
    dr_increase_adds: "DR â€” Increase (adds to balance)",
    cr_decrease_reduces: "CR â€” Decrease (reduces balance)",
    after_customer_more: "After this adjustment, customer will owe you Rs {money} more.",
    after_customer_less: "After this adjustment, customer will owe you Rs {money} less.",
    after_supplier_less: "After this adjustment, you will owe the supplier Rs {money} less.",
    after_supplier_more: "After this adjustment, you will owe the supplier Rs {money} more.",
    after_balance_change: "After this adjustment, balance will change by Rs {money}.",
    effect_opt_1: "Option 1",
    effect_opt_2: "Option 2",
    effect_choose_party: "Select a party to see the correct effect",
    effect_choose_party_2: "Select a party to see the correct effect",
  });

  Object.assign(window.ROZ_I18N.ur, {
    adj_title: "Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹Ø³",
    adj_subtitle: "Ú©Ø³Ù¹Ù…Ø±/Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©ÛŒ Ø§ÙˆÙ¾Ù†Ù†Ú¯ Ø¨ÛŒÙ„Ù†Ø³ Ú©ÛŒ Ø¯Ø±Ø³ØªÚ¯ÛŒ (Ú©ÛŒØ´/Ø¨ÛŒÙ†Ú© Ø´Ø§Ù…Ù„ Ù†ÛÛŒÚº)Û” ÛŒÛ Ù¾ÙˆØ³Ù¹ ÛÙˆØªØ§ ÛÛ’",
    opening_balances: "Ø§ÙˆÙ¾Ù†Ù†Ú¯ Ø¨ÛŒÙ„Ù†Ø³",
    back_dashboard: "â† ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ",
    payments: "Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒØ§Úº",

    new_adj: "Ù†Ø¦ÛŒ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹",
    date: "ØªØ§Ø±ÛŒØ®",
    party: "Ù¾Ø§Ø±Ù¹ÛŒ",
    select_party: "-- Ù¾Ø§Ø±Ù¹ÛŒ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº --",
    amount_rs: "Ø±Ù‚Ù… (Ø±ÙˆÙ¾Û’)",
    effect: "Ø§Ø«Ø±",
    increase_adds: "Ø§Ø¶Ø§ÙÛ (Ø¨ÛŒÙ„Ù†Ø³ Ø¨Ú‘Ú¾ØªØ§ ÛÛ’)",
    decrease_reduces: "Ú©Ù…ÛŒ (Ø¨ÛŒÙ„Ù†Ø³ Ú¯Ú¾Ù¹ØªØ§ ÛÛ’)",
    after_adjustment_dash: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ â€”",
    tip_opening_only: "Ù¹ÙÙ¾: ÛŒÛ ØµØ±Ù Ø§ÙˆÙ¾Ù†Ù†Ú¯ Ø¨ÛŒÙ„Ù†Ø³ Ú©ÛŒ Ø¯Ø±Ø³ØªÚ¯ÛŒ ÛÛ’ (Ú©ÛŒØ´/Ø¨ÛŒÙ†Ú© Ø´Ø§Ù…Ù„ Ù†ÛÛŒÚº)Û”",
    note_reason_opt: "Ù†ÙˆÙ¹ / ÙˆØ¬Û (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)",
    save_post_adj: "ğŸ’¾ Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ù¾ÙˆØ³Ù¹ Ú©Ø±ÛŒÚº",

    adj_history: "Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ ÛØ³Ù¹Ø±ÛŒ",
    total_amount_sum: "Ú©Ù„ (Ø±Ù‚Ù… Ú©Ø§ Ù…Ø¬Ù…ÙˆØ¹Û):",
    type: "Ù‚Ø³Ù…",
    side: "Ø³Ø§Ø¦ÛŒÚˆ",
    amount: "Ø±Ù‚Ù…",
    note: "Ù†ÙˆÙ¹",
    no_adjustments_yet: "Ø§Ø¨Ú¾ÛŒ ØªÚ© Ú©ÙˆØ¦ÛŒ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ù†ÛÛŒÚºÛ”",
    posting_rule_party: "Ù¾ÙˆØ³Ù¹Ù†Ú¯ Ø±ÙˆÙ„: Ú©Ø³Ù¹Ù…Ø± Ú©Ù†Ù¹Ø±ÙˆÙ„ (1300) ÛŒØ§ Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©Ù†Ù¹Ø±ÙˆÙ„ (2100) Ø¨Ù…Ù‚Ø§Ø¨Ù„Û Ø§ÙˆÙ¾Ù†Ù†Ú¯ Ø¨ÛŒÙ„Ù†Ø³ (3000)Û”",

    stock_adj: "Ø§Ø³Ù¹Ø§Ú© Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹",
    stock_adj_desc: "Ù†Ù‚ØµØ§Ù†/Ø§ÛŒÚ©Ø³Ù¾Ø§Ø¦Ø±ÛŒ ÛŒØ§ Ø§Ø³Ù¹Ø§Ú© Ú©ÛŒ Ø¯Ø±Ø³ØªÚ¯ÛŒ (Ø§Ú©Ø§Ø¤Ù†Ù¹Ù†Ú¯ Ø§Ø«Ø± Ú©Û’ Ø³Ø§ØªÚ¾)Û”",
    product: "Ù¾Ø±ÙˆÚˆÚ©Ù¹",
    select_product: "-- Ù¾Ø±ÙˆÚˆÚ©Ù¹ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº --",
    direction: "ÚˆØ§Ø¦Ø±ÛŒÚ©Ø´Ù†",
    down_damage: "DOWN (Ù†Ù‚ØµØ§Ù† / Ø§ÛŒÚ©Ø³Ù¾Ø§Ø¦Ø±ÛŒ / Ú©Ù…ÛŒ)",
    up_correction: "UP (Ø§Ø¶Ø§ÙÛŒ / Ù…Ù„Ø§ / Ø¯Ø±Ø³ØªÚ¯ÛŒ)",
    quantity: "Ù…Ù‚Ø¯Ø§Ø±",
    unit_cost_rs: "ÙÛŒ ÛŒÙˆÙ†Ù¹ Ù‚ÛŒÙ…Øª (Ø±ÙˆÙ¾Û’)",
    autofill_cost: "ÛŒÛ Ù¾Ø±ÙˆÚˆÚ©Ù¹ Ú©ÛŒ Ù¾Ø±Ú†ÛŒØ² Ù¾Ø±Ø§Ø¦Ø³ Ø³Û’ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ú¾Ø± Ø¬Ø§Ø¦Û’ Ú¯ÛŒÛ”",
    total_rs: "Ú©Ù„ (Ø±ÙˆÙ¾Û’)",
    reason_opt: "ÙˆØ¬Û (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)",
    save_post_stock: "ğŸ’¾ Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø§Ø³Ù¹Ø§Ú© Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ù¾ÙˆØ³Ù¹ Ú©Ø±ÛŒÚº",

    stock_history: "Ø§Ø³Ù¹Ø§Ú© Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ ÛØ³Ù¹Ø±ÛŒ",
    qty: "Ù…Ù‚Ø¯Ø§Ø±",
    unit_cost: "ÙÛŒ ÛŒÙˆÙ†Ù¹ Ù‚ÛŒÙ…Øª",
    reason: "ÙˆØ¬Û",
    no_stock_adjustments: "Ø§Ø¨Ú¾ÛŒ ØªÚ© Ú©ÙˆØ¦ÛŒ Ø§Ø³Ù¹Ø§Ú© Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ù†ÛÛŒÚºÛ”",
    posting_rule_stock: "Ù¾ÙˆØ³Ù¹Ù†Ú¯ Ø±ÙˆÙ„: DOWN â†’ Dr Inventory Write-off (5100) / Cr Inventory (1400)ØŒ UP â†’ Dr Inventory (1400) / Cr Opening Balances (3000)Û”",

    // JS dynamic labels/sentences
    dr_customer_more: "DR â€” Ú©Ø³Ù¹Ù…Ø± Ø¢Ù¾ Ú©Ùˆ Ø²ÛŒØ§Ø¯Û Ø¯Û’ Ú¯Ø§",
    cr_customer_less: "CR â€” Ú©Ø³Ù¹Ù…Ø± Ø¢Ù¾ Ú©Ùˆ Ú©Ù… Ø¯Û’ Ú¯Ø§",
    dr_supplier_less: "DR â€” Ø¢Ù¾ Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©Ùˆ Ú©Ù… Ø¯ÛŒÚº Ú¯Û’",
    cr_supplier_more: "CR â€” Ø¢Ù¾ Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©Ùˆ Ø²ÛŒØ§Ø¯Û Ø¯ÛŒÚº Ú¯Û’",
    dr_increase_adds: "DR â€” Ø§Ø¶Ø§ÙÛ (Ø¨ÛŒÙ„Ù†Ø³ Ø¨Ú‘Ú¾ØªØ§ ÛÛ’)",
    cr_decrease_reduces: "CR â€” Ú©Ù…ÛŒ (Ø¨ÛŒÙ„Ù†Ø³ Ú¯Ú¾Ù¹ØªØ§ ÛÛ’)",
    after_customer_more: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ú©Ø³Ù¹Ù…Ø± Ø¢Ù¾ Ú©Ùˆ Rs {money} Ø²ÛŒØ§Ø¯Û Ø¯Û’ Ú¯Ø§Û”",
    after_customer_less: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ú©Ø³Ù¹Ù…Ø± Ø¢Ù¾ Ú©Ùˆ Rs {money} Ú©Ù… Ø¯Û’ Ú¯Ø§Û”",
    after_supplier_less: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ø¢Ù¾ Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©Ùˆ Rs {money} Ú©Ù… Ø¯ÛŒÚº Ú¯Û’Û”",
    after_supplier_more: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ø¢Ù¾ Ø³Ù¾Ù„Ø§Ø¦Ø± Ú©Ùˆ Rs {money} Ø²ÛŒØ§Ø¯Û Ø¯ÛŒÚº Ú¯Û’Û”",
    after_balance_change: "Ø§Ø³ Ø§ÛŒÚˆØ¬Ø³Ù¹Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ø¨ÛŒÙ„Ù†Ø³ Ù…ÛŒÚº Rs {money} Ú©ÛŒ ØªØ¨Ø¯ÛŒÙ„ÛŒ ÛÙˆÚ¯ÛŒÛ”",
    effect_opt_1: "Ø¢Ù¾Ø´Ù† 1",
    effect_opt_2: "Ø¢Ù¾Ø´Ù† 2",
    effect_choose_party: "Ø¯Ø±Ø³Øª Ø§Ø«Ø± Ø¯ÛŒÚ©Ú¾Ù†Û’ Ú©ÛŒÙ„Ø¦Û’ Ù¾Ø§Ø±Ù¹ÛŒ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº",
    effect_choose_party_2: "Ø¯Ø±Ø³Øª Ø§Ø«Ø± Ø¯ÛŒÚ©Ú¾Ù†Û’ Ú©ÛŒÙ„Ø¦Û’ Ù¾Ø§Ø±Ù¹ÛŒ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº",
  });

  // Apply current language to this page after dict is loaded
  if (window.applyLang) window.applyLang(localStorage.getItem("roz_lang") || "en");
</script>

{% endblock %}